machine:
  ghc:
    version: 7.8.3
  environment:
    PATH: $HOME/.cabal/bin:$PATH
    COVERALLS_REPO_TOKEN: SUwFdsOK2VhTVNgcQDXM1cZWSQlxuHpLw

checkout:
  post:
    - git submodule sync
    - git submodule update --init
    - ./hpc.sh
    - git config --global user.email "john@example.com"
    - git config --global user.name "John Doe"

test:
  override:
    - cabal configure --enable-tests --enable-library-coverage --ghc-options=-Werror && cabal build
    - run-cabal-test spec --show-details=always
    - cabal test doctests
  post:
    - hpc-coveralls spec --display-report --print-response --exclude-dir=test
